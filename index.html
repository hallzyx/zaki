<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Mi Girasol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Raleway:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Raleway', sans-serif;
            overflow: hidden; /* Evita el scroll HASTA que termine la intro */
        }
        .font-dancing {
            font-family: 'Dancing Script', cursive;
        }
        .petal {
            position: absolute;
            background-color: rgba(255, 223, 100, 0.9);
            border-radius: 50% 0;
            width: 25px;
            height: 30px;
            z-index: 0;
        }
        .scroll-scene {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-yellow-50 via-amber-100 to-yellow-200">

    <div id="loading-overlay" class="fixed inset-0 bg-yellow-50 z-50 flex flex-col items-center justify-center">
        <h2 id="loading-text" class="font-dancing text-amber-800 text-4xl md:text-5xl z-10 text-center px-4 mb-8">De parte de tu querido burriqui, arroz...</h2>
        <div id="petal-origin" class="relative"></div>
    </div>

    <div id="petal-container" class="fixed top-0 left-0 w-full h-full pointer-events-none"></div>

    <!-- Contenido principal modificado para el scroll journey -->
    <div id="main-content" class="relative z-10 opacity-0">
        
        <!-- Sección 1 del Viaje -->
        <section class="scroll-scene">
            <div class="text-center text-amber-900">
                <div class="journey-photo w-full max-w-2xl mx-auto rounded-3xl shadow-2xl overflow-hidden mb-6">
                    <img src="img/us_1.png" class="w-full h-full object-cover">
                </div>
                <h3 class="journey-text font-dancing text-4xl md:text-5xl">Para la sonrisa que ilumina mis días...</h3>
            </div>
        </section>

        <!-- Sección 2 del Viaje -->
        <section class="scroll-scene">
            <div class="text-center text-amber-900">
                <div class="journey-photo w-full max-w-2xl mx-auto rounded-3xl shadow-2xl overflow-hidden mb-6">
                    <img src="img/us_2.png" class="w-full h-full object-cover">
                </div>
                <h3 class="journey-text font-dancing text-4xl md:text-5xl">Para las ojeras que me cautivan con la mirada... </h3>
            </div>
        </section>
        
        <!-- Sección 3 del Viaje -->
        <section class="scroll-scene">
            <div class="text-center text-amber-900">
                <div class="journey-photo w-full max-w-2xl mx-auto rounded-3xl shadow-2xl overflow-hidden mb-6">
                    <img src="img/us_3.png" class="w-full h-full object-cover">
                </div>
                <h3 class="journey-text font-dancing text-4xl md:text-5xl">Para la mejor maestra del mundo, mi mejor maestra de vida.</h3>
            </div>
        </section>

        <!-- Sección 4 del Viaje -->
        <section class="scroll-scene">
            <div class="text-center text-amber-900">
                 <div class="journey-photo w-full max-w-lg mx-auto rounded-3xl shadow-2xl overflow-hidden mb-6">
                    <img src="img/us_4.png" class="w-full h-full object-cover">
                </div>
                <h3 class="journey-text font-dancing text-4xl md:text-5xl"></h3>
            </div>
        </section>

        <!-- Sección Final: El Collage -->
        <section id="collage-section" class="relative min-h-screen flex flex-col items-center justify-center p-4">
            <div class="w-full max-w-4xl mx-auto bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl shadow-yellow-800/20 p-6 md:p-12 text-center">
                <h1 class="font-dancing text-4xl md:text-6xl text-amber-900 font-bold mb-4">
                    Voy a cuidar cada pétalo de ti, mi hermosa girasol
                </h1>
                <p class="text-amber-700 mb-10 text-lg">Feliz Día de las Flores Amarillas, Claudía Licon, by arroz</p>
                <div class="grid grid-cols-2 md:grid-cols-3 md:grid-rows-2 gap-4 md:gap-6 h-[60vh] md:h-[70vh]">
                    <div class="group relative overflow-hidden rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-500 ease-in-out cursor-pointer md:col-span-2" onclick="openModal('img/us_1.png')">
                        <img src="img/us_1.png" alt="Entregando flores amarillas 1" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center"><p class="text-white font-bold text-xl font-dancing">Tu alegria</p></div>
                    </div>
                    <div class="group relative overflow-hidden rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-500 ease-in-out cursor-pointer md:row-span-2" onclick="openModal('img/us_4.png')">
                        <img src="img/us_4.png" alt="Entregando flores amarillas 4" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center"><p class="text-white font-bold text-xl font-dancing">Tu sonrisa</p></div>
                    </div>
                    <div class="group relative overflow-hidden rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-500 ease-in-out cursor-pointer" onclick="openModal('img/us_2.png')">
                        <img src="img/us_2.png" alt="Entregando flores amarillas 2" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center"><p class="text-white font-bold text-xl font-dancing">Tu mirada</p></div>
                    </div>
                    <div class="group relative overflow-hidden rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-500 ease-in-out cursor-pointer" onclick="openModal('img/us_3.png')">
                        <img src="img/us_3.png" alt="Entregando flores amarillas 3" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center"><p class="text-white font-bold text-xl font-dancing">Nosotros</p></div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para ver la imagen en grande -->
    <div id="imageModal" class="fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center hidden z-50" onclick="closeModal()">
        <div class="relative p-4">
            <img id="modalImage" src="" alt="Imagen ampliada" class="max-w-[80vw] max-h-[80vh] rounded-2xl shadow-2xl">
            <button class="absolute -top-4 -right-4 bg-white text-amber-900 rounded-full w-10 h-10 text-2xl font-bold flex items-center justify-center">&times;</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);

            const overlay = document.getElementById('loading-overlay');
            const mainContent = document.getElementById('main-content');
            const loadingText = document.getElementById('loading-text');
            const petalOrigin = document.getElementById('petal-origin');
            const introPetalCount = 150;

            gsap.set(mainContent, { autoAlpha: 0 });
            gsap.set(loadingText, { autoAlpha: 0 });

            for (let i = 0; i < introPetalCount; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal intro-petal';
                petalOrigin.appendChild(petal);
            }

            const tl = gsap.timeline({
                delay: 0.2,
                onComplete: () => {
                    document.body.style.overflow = 'auto'; // Permitir scroll
                    gsap.to(mainContent, { autoAlpha: 1, duration: 1 });
                    startBackgroundPetalFall();
                    setupScrollJourney();
                }
            });

            tl.from(".intro-petal", { opacity: 0, scale: 0, rotation: () => gsap.utils.random(-180, 180), duration: 1.2, stagger: 0.02, ease: "power3.out" })
            .to(loadingText, { autoAlpha: 1, duration: 1.2, ease: "power2.inOut" }, "<0.2")
            .to({}, {duration: 1.5}) 
            .to(".intro-petal", { x: () => gsap.utils.random(-window.innerWidth, window.innerWidth), y: () => gsap.utils.random(-window.innerHeight, window.innerHeight), opacity: 0, rotation: () => gsap.utils.random(-720, 720), duration: 2, stagger: 0.01, ease: "power2.out" })
            .to(loadingText, { autoAlpha: 0, duration: 1.5, ease: "power2.in" }, "<")
            .to(overlay, { opacity: 0, duration: 1.5, onComplete: () => overlay.style.display = 'none' }, "<");

            function setupScrollJourney() {
                const scenes = gsap.utils.toArray('.scroll-scene');
                scenes.forEach((scene, index) => {
                    const photo = scene.querySelector('.journey-photo');
                    const text = scene.querySelector('.journey-text');
                    
                    // Condición para la primera escena: animarla sin scroll
                    if (index === 0) {
                        // Hacemos que la primera foto aparezca automáticamente después de la intro
                        gsap.from(photo, {
                            autoAlpha: 0,
                            y: 100,
                            scale: 0.9,
                            duration: 1.5,
                            ease: "expo.out",
                            delay: 0.2 // Un pequeño delay para que la transición sea suave
                        });
                        gsap.from(text, {
                            autoAlpha: 0,
                            y: 50,
                            duration: 1,
                            ease: "power3.out",
                            delay: 0.5
                        });
                    } else {
                        // Para las demás escenas, la animación se activa con el scroll
                        gsap.from(photo, {
                            scrollTrigger: {
                                trigger: scene,
                                start: "top 70%",
                                end: "bottom bottom",
                                toggleActions: "play reverse play reverse",
                            },
                            autoAlpha: 0,
                            y: 100,
                            scale: 0.9,
                            duration: 1.5,
                            ease: "expo.out"
                        });
                         gsap.from(text, {
                            scrollTrigger: {
                                trigger: scene,
                                start: "top 60%",
                                end: "bottom bottom",
                                toggleActions: "play reverse play reverse",
                            },
                            autoAlpha: 0,
                            y: 50,
                            duration: 1,
                            ease: "power3.out",
                            delay: 0.3
                        });
                    }
                });

                // Animación para revelar el collage final
                gsap.from("#collage-section > div", {
                    scrollTrigger: {
                        trigger: "#collage-section",
                        start: "top 60%",
                        toggleActions: "play none none none"
                    },
                    autoAlpha: 0,
                    y: 100,
                    duration: 1.5,
                    ease: "expo.out"
                });
            }

            function startBackgroundPetalFall() {
                const container = document.getElementById('petal-container');
                const petalCount = 30;
                for (let i = 0; i < petalCount; i++) {
                    const petal = document.createElement('div');
                    petal.className = 'petal';
                    petal.style.left = `${Math.random() * 100}vw`;
                    petal.style.top = '-20px';
                    petal.style.animation = `fall ${gsap.utils.random(6, 12)}s linear ${gsap.utils.random(0, 5)}s infinite`;
                    container.appendChild(petal);
                }
            }

            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');

            window.openModal = function(imageSrc) {
                modalImage.src = imageSrc;
                modal.classList.remove('hidden');
            }

            window.closeModal = function() {
                modal.classList.add('hidden');
                modalImage.src = "";
            }
        });
    </script>
</body>
</html>



